/* common.utils.js: a core framework library of utilities and polyfills.
   
   This adds utility functions into a namespace u.

   Standard polyfills are automatically added to their prototypes. The following nonstandard prototype
   changes are made:
        
        String.format
        String.split with trim option
        Array.contains
        Array.first

   You can remove the call to u.polyfill to prevent the nonstandard changes.

   Version 1.0
   James Treworgy
*/
(function(a){a(function(){var t,q=String.prototype.split;function n(u){return typeof u==="boolean";
}function o(u){return typeof u==="string";}function p(u){return typeof u==="undefined";
}function m(u){return u&&u.constructor===Array;}function s(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"");
}function k(u,x){var v=this,w,y;if(o(v)){v=v.split(",");}if(m(v)){for(w=0;w<v.length;
w++){y=o(v[w])?s.call(v[w]):v[w];if(u.call(y,w,y)===false){break;}}}else{for(w in v){if(v.hasOwnProperty(w)){if(u.call(v[w],w,v[w])===false){break;
}}}}}function l(){var u=(arguments.length===1&&$.isArray(arguments[0]))?arguments[0]:arguments;
return this.replace(/\{(\d+)\}/g,function(v,x){var w=parseInt(x,10);return !p(u[w])?String(u[w]):v;
});}function r(v,y){var w=[],u=o(v)?v:",",x=n(v)?v:n(y)?y:false;k.call(q.call(this,u||","),function(A,z){w.push(x?s(z):z);
});return w;}function f(u,x){for(var v=0,w=this.length;v<w;v++){if(v in this){u.call(x,this[v],v,this);
}}}function g(u,v){if(v===undefined){v=0;}if(v<0){v+=this.length;}if(v<0){v=0;}for(var w=this.length;
v<w;v++){if(v in this&&this[v]===u){return v;}}return -1;}function b(u){return g.call(this,u)>=0;
}function e(u){var v,w;if(!u){return this.length>0?this[0]:w;}for(v=0;v<this.length;
v++){if(u.call(this[v],v,this[v])){return this[v];}}return w;}function h(u,v){if(v===undefined){v=this.length-1;
}if(v<0){v+=this.length;}if(v>this.length-1){v=this.length-1;}for(v++;v-->0;){if(v in this&&this[v]===u){return v;
}}return -1;}function i(v,y){var w,u,x=new Array(this.length);for(u=0,w=this.length;
u<w;u++){if(u in this){x[u]=v.call(y,this[u],u,this);}}return x;}function d(u,z){var w,x,y=[],A;
for(w=0,x=this.length;w<x;w++){if(w in this&&u.call(z,A=this[w],w,this)){y.push(A);
}}return y;}function c(w,x){for(var u=0,v=this.length;u<v;u++){if(u in this&&!w.call(x,this[u],u,this)){return false;
}}return true;}function j(w,x){for(var u=0,v=this.length;u<v;u++){if(u in this&&w.call(x,this[u],u,this)){return true;
}}return false;}t={extend:function(D){var A,B,C,v,y=arguments.length,w=t.isBool(arguments[y-1]),x=w?y-2:y-1,u=!D,z=w?arguments[x+1]:false;
D=D||{};C=t.toArray(arguments,1,x+1);for(v=0;v<C.length;v++){B=C[v];for(A in B){if(B.hasOwnProperty(A)&&(u||!z||D.hasOwnProperty(A))){D[A]=B[A];
}}u=false;}return D;},filterProps:function(v,x){var w={},u=t.isArray(x)?x:x.split(",");
t.each(u,function(y,z){w[z]=v[z];});return w;},toArray:function(u,v,w){return Array.prototype.slice.call(u,v||0,w||u.length);
},isArray:m,arrayIndexOf:function(u,v){return g.call(u,v);},inArray:function(u,v){return b.call(u,v);
},isFunction:function(u){return typeof u==="function";},isUndefined:p,isString:o,isBool:n,isValueType:function(u){return t.inArray(["boolean","number","string"],typeof(u));
},trim:function(u){return s.call(u);},split:function(v,u){return r.call(v,u);},format:function(){return l.apply(arguments[0],t.toArray(arguments,1));
},each:function(v,u){return k.call(v,u);},donothing:function(){},polyfill:function(){Array.prototype.contains=b;
Array.prototype.first=e;String.prototype.format=l;if(String.prototype.split!==r){String.prototype.split=r;
}}};if(!Array.prototype.indexOf){Array.prototype.indexOf=g;}if(!Array.prototype.trim){Array.prototype.trim=s;
}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=h;}if(!Array.prototype.forEach){Array.prototype.forEach=f;
}if(!Array.prototype.filter){Array.prototype.filter=d;}if(!Array.prototype.every){Array.prototype.every=c;
}if(!Array.prototype.some){Array.prototype.some=j;}if(!Array.prototype.map){Array.prototype.map=i;
}t.polyfill();return t;});}(typeof define==="function"?define:function(a){if(typeof module!=="undefined"){module.exports=a();
}else{this.common=this.common||{};this.common.utils=a();}}));