/* common.utils.js: a core framework library of utilities and polyfills.
   
This adds utility functions into a namespace u.

Standard polyfills are automatically added to their prototypes. The following nonstandard prototype
changes are made:
        
String.format
String.split with trim option
Array.contains
Array.first

You can remove the call to u.polyfill to prevent the nonstandard changes.

Version 1.0
James Treworgy
*/
(function(a){a(function(){var s;function n(t){return typeof t==="boolean";}function o(t){return typeof t==="string";
}function p(t){return typeof t==="undefined";}function m(t){return t&&t.constructor===Array;
}function r(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"");}function k(t,w){var u=this,v,x;
if(!u){return;}if(o(u)){u=u.split(",");}if(m(u)){for(v=0;v<u.length;v++){x=o(u[v])?r.call(u[v]):u[v];
if(t.call(x,v,x)===false){break;}}}else{for(v in u){if(u.hasOwnProperty(v)){if(t.call(u[v],v,u[v])===false){break;
}}}}}function l(){var t=(arguments.length===1&&$.isArray(arguments[0]))?arguments[0]:arguments;
return this.replace(/\{(\d+)\}/g,function(u,w){var v=parseInt(w,10);return !p(t[v])?String(t[v]):u;
});}function q(u,x){var v=[],t=o(u)?u:",",w=n(u)?u:n(x)?x:false;k.call(String.prototype.split.call(this,t||","),function(z,y){v.push(w?r(y):y);
});return v;}function f(t,w){for(var u=0,v=this.length;u<v;u++){if(u in this){t.call(w,this[u],u,this);
}}}function g(t,u){if(u===undefined){u=0;}if(u<0){u+=this.length;}if(u<0){u=0;}for(var v=this.length;
u<v;u++){if(u in this&&this[u]===t){return u;}}return -1;}function b(t){return g.call(this,t)>=0;
}function e(t){var u,v;if(!t){return this.length>0?this[0]:v;}for(u=0;u<this.length;
u++){if(t.call(this[u],u,this[u])){return this[u];}}return v;}function h(t,u){if(u===undefined){u=this.length-1;
}if(u<0){u+=this.length;}if(u>this.length-1){u=this.length-1;}for(u++;u-->0;){if(u in this&&this[u]===t){return u;
}}return -1;}function i(u,x){var v,t,w=new Array(this.length);for(t=0,v=this.length;
t<v;t++){if(t in this){w[t]=u.call(x,this[t],t,this);}}return w;}function d(t,y){var u,w,x=[],z;
for(u=0,w=this.length;u<w;u++){if(u in this&&t.call(y,z=this[u],u,this)){x.push(z);
}}return x;}function c(v,w){for(var t=0,u=this.length;t<u;t++){if(t in this&&!v.call(w,this[t],t,this)){return false;
}}return true;}function j(v,w){for(var t=0,u=this.length;t<u;t++){if(t in this&&v.call(w,this[t],t,this)){return true;
}}return false;}s={extend:function(C){var z,A,B,u,x=arguments.length,v=s.isBool(arguments[x-1]),w=v?x-2:x-1,t=!C,y=v?arguments[w+1]:false;
C=C||{};B=s.toArray(arguments,1,w+1);for(u=0;u<B.length;u++){A=B[u];for(z in A){if(A.hasOwnProperty(z)&&(t||!y||C.hasOwnProperty(z))){C[z]=A[z];
}}t=false;}return C;},filterProps:function(u,w){var v={},t=s.isArray(w)?w:w.split(",");
s.each(t,function(x,y){v[y]=u[y];});return v;},toArray:function(t,u,v){return Array.prototype.slice.call(t,u||0,v||t.length);
},isArray:m,arrayIndexOf:function(t,u){return g.call(t,u);},inArray:function(t,u){return b.call(t,u);
},isFunction:function(t){return typeof t==="function";},isUndefined:p,isString:o,isBool:n,isValueType:function(t){return s.inArray(["boolean","number","string"],typeof(t));
},trim:function(t){return r.call(t);},split:function(u,t){return q.call(u,t);},format:function(){return l.apply(arguments[0],s.toArray(arguments,1));
},each:function(u,t){u&&k.call(u,t);},donothing:function(){},polyfill:function(){Array.prototype.contains=b;
Array.prototype.first=e;String.prototype.format=l;}};if(!Array.prototype.indexOf){Array.prototype.indexOf=g;
}if(!Array.prototype.trim){Array.prototype.trim=r;}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=h;
}if(!Array.prototype.forEach){Array.prototype.forEach=f;}if(!Array.prototype.filter){Array.prototype.filter=d;
}if(!Array.prototype.every){Array.prototype.every=c;}if(!Array.prototype.some){Array.prototype.some=j;
}if(!Array.prototype.map){Array.prototype.map=i;}s.polyfill();return s;});}(typeof define==="function"?define:function(a){if(typeof module!=="undefined"){module.exports=a();
}else{this.common=this.common||{};this.common.utils=a();}}));